import { existsSync, readFileSync, statSync, writeFileSync } from 'fs';
import Convert from 'xml-js';
import {
  solveThreeVariableLinearEquations,
  updateSinRuleList,
  getCoefficient,
  getMatchSinData,
  toAsyncTimeFunction,
  toFifoFunction,
  pickBy,
  range,
  updateChuanRuleList,
  getLeagueSameWeight
} from './utils/index.js';
import { delay, uniqBy } from './api/utils.js';
import { randomUUID } from 'crypto';
// 运维接口
import { spawnSync, execSync } from 'child_process';
import { updateMethodRuleList } from './utils/methodRule.js';
import path from 'path';
import dayjs from 'dayjs';

(async () => {
  // updateSinRuleList([]);
  // updateMethodRuleList([]);
  updateChuanRuleList([
    {
      "matchId1": "1028041",
      "matchId2": "1028046",
      "method1": "WL",
      "method2": "WL",
      "JCPoint": 0.13,
      "HGPoint": 0.027,
      "JCTzAmt": "10000",
      "HGTzAmt1_1": "9112.6476",
      "HGTzAmt1_2": 0,
      "HGTzAmt2_1": "17208.8743",
      "HGTzAmt2_2": 0,
      "JcProfitRate": "2.8416%",
      "JcProfit": "284.1592",
      "HgProfit1": "284.1592",
      "HgProfit2": "284.1592",
      "JCAmount": "34595.0000",
      "HGAmount1_1": "17860.7893",
      "HGAmount1_2": 0,
      "HGAmount2_1": "34589.8373",
      "HGAmount2_2": 0,
      "JCgoalLine1": "-1",
      "JCgoalLine2": "-3",
      "HGgoalLine1_1": "-",
      "HGgoalLine1_2": "-",
      "HGgoalLine2_1": "-2.5",
      "HGgoalLine2_2": "-",
      "JCTzOdd1": "1.85",
      "JCTzOdd2": "1.87",
      "HGTzOdd1_1": "1.960",
      "HGTzOdd1_2": "-",
      "HGTzOdd2_1": "2.01",
      "HGTzOdd2_2": "-",
      "yield": "Sin",
      "planId": "1028041_1.85_1028046_1.87",
      "JCTouz1": "a",
      "JCTouz2": "a",
      "HGTouz1_1": "h",
      "HGTouz1_2": "-",
      "HGTouz2_1": "h",
      "HGTouz2_2": "-"
    },
    {
      "matchId1": "1028041",
      "matchId2": "1028046",
      "method1": "WLD2",
      "method2": "WL",
      "JCPoint": 0.13,
      "HGPoint": 0.027,
      "JCTzAmt": "10000",
      "HGTzAmt1_1": "17831.2221",
      "HGTzAmt1_2": "8840.0288",
      "HGTzAmt2_1": "33673.5811",
      "HGTzAmt2_2": 0,
      "JcProfitRate": "2.7848%",
      "JcProfit": "278.4785",
      "HgProfit1": "278.4785",
      "HgProfit2": "278.4785",
      "JCAmount": "67694.0000",
      "HGAmount1_1": "34949.1953",
      "HGAmount1_2": "34476.1123",
      "HGAmount2_1": "67683.8980",
      "HGAmount2_2": 0,
      "JCgoalLine1": "-",
      "JCgoalLine2": "-3",
      "HGgoalLine1_1": "-",
      "HGgoalLine1_2": "-",
      "HGgoalLine2_1": "-2.5",
      "HGgoalLine2_2": "-",
      "JCTzOdd1": "3.62",
      "JCTzOdd2": "1.87",
      "HGTzOdd1_1": "1.960",
      "HGTzOdd1_2": "3.900",
      "HGTzOdd2_1": "2.01",
      "HGTzOdd2_2": "-",
      "yield": "Sin",
      "planId": "1028041_3.62_1028046_1.87",
      "JCTouz1": "a",
      "JCTouz2": "a",
      "HGTouz1_1": "h",
      "HGTouz1_2": "d",
      "HGTouz2_1": "h",
      "HGTouz2_2": "-"
    },
    {
      "matchId1": "1028040",
      "matchId2": "1028046",
      "method1": "WL",
      "method2": "WL",
      "JCPoint": 0.13,
      "HGPoint": 0.027,
      "JCTzAmt": "10000",
      "HGTzAmt1_1": "11390.6809",
      "HGTzAmt1_2": 0,
      "HGTzAmt2_1": "19255.3350",
      "HGTzAmt2_2": 0,
      "JcProfitRate": "1.9043%",
      "JcProfit": "190.4265",
      "HgProfit1": "190.4265",
      "HgProfit2": "190.4265",
      "JCAmount": "38709.0000",
      "HGAmount1_1": "20047.5984",
      "HGAmount1_2": 0,
      "HGAmount2_1": "38703.2234",
      "HGAmount2_2": 0,
      "JCgoalLine1": "+1",
      "JCgoalLine2": "-3",
      "HGgoalLine1_1": "-",
      "HGgoalLine1_2": "-",
      "HGgoalLine2_1": "-2.5",
      "HGgoalLine2_2": "-",
      "JCTzOdd1": "2.07",
      "JCTzOdd2": "1.87",
      "HGTzOdd1_1": "1.760",
      "HGTzOdd1_2": "-",
      "HGTzOdd2_1": "2.01",
      "HGTzOdd2_2": "-",
      "yield": "Sin",
      "planId": "1028040_2.07_1028046_1.87",
      "JCTouz1": "h",
      "JCTouz2": "a",
      "HGTouz1_1": "a",
      "HGTouz1_2": "-",
      "HGTouz2_1": "h",
      "HGTouz2_2": "-"
    }
  ])
  console.log(getLeagueSameWeight('瑞典超级甲组联赛-附加赛', '瑞典超级联赛'));
  console.log(getLeagueSameWeight('瑞典超级甲组联赛-附加赛', '瑞典甲组联赛-附加赛'));
})();
